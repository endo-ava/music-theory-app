# 画面仕様詳細: インタラクティブ・ハブ

[<< 画面設計書（全体）に戻る](../../docs/02.screenDesign.md)

## 1. 画面概要
- **画面ID**: `SCR-001`
- **画面名**: インタラクティブ・ハブ
- **概要**: 本アプリケーションの中核をなす、インタラクティブな学習・分析画面。ユーザーは理論の「地図」を操作し、様々な情報「レイヤー」を重ねることで、音楽理論の構造を直感的に探求する。

## 2. 画面レイアウト
ワイドスクリーンを前提とした2カラムレイアウトを採用。左にコントロールパネル、右にメインの描画エリアを配置する。

```
+--------------------------------------------------------------------------------------+
| A. グローバルヘッダーナビゲーション                                          |
+--------------------------------------------------------------------------------------+
|                                |                                                     |
|                                | B. メイン表示エリア (Canvas)                        |
|                                |                                                     |
| C. サイドパネル                |   +---------------------------------------------+   |
| (Control & Information)        |   |                                             |   |
|                                |   |         五度圏 / クロマチックサークル         |   |
|                                |   |              (Hub Component)                |   |
| +--------------------------+   |   |                                             |   |
| | C-1: ビュー・コントローラー|   |   +-----------------------------------------+   |
| +--------------------------+   |   |                                             |   |
| | C-2: レイヤー・コントローラー|   |                                             |   |
| +--------------------------+   |   |                                             |   |
| |                          |   |   +-----------------------------------------+   |
| | C-3: 情報パネル          |   |                                             |   |
| |                          |   |                                             |   |
| |                          |   |                                             |   |
| +--------------------------+   |   +---------------------------------------------+   |
|                                |                                                     |
|                                |                                                     |
+--------------------------------------------------------------------------------------+
```

## 3. コンポーネント仕様

### 3.1. メイン表示エリア (Canvas)
- **役割**: `Hub & Layer` モデルの視覚的な表現領域。ユーザーの主たる操作対象となる。
- **主要機能**:
    - Hubコンポーネント（五度圏など）を描画する。
    - ユーザーによるキーやコードの選択（クリック/ホバー）を受け付ける。
    - レイヤー・コントローラーで有効化された情報を、Hubコンポーネント上にオーバーレイ描画する。

### 3.2. サイドパネル (コントロールパネル)

#### C-1: ビュー・コントローラー (View Controller)
- **役割**: Canvasに描画するHubコンポーネント（=理論の地図）の種類を切り替える。
- **主要機能**: `五度圏`と`クロマチックサークル`の表示をトグル形式で切り替える。

#### C-2: レイヤー・コントローラー (Layer Controller)
- **役割**: Canvas上に表示する音楽理論の各情報レイヤーの可視性を制御する。
- **主要機能**:
    - チェックボックス形式で各レイヤーの表示/非表示を切り替える。
    - 各レイヤーの概念を解説するライブラリ画面へ遷移するための情報アイコン `(?)` を提供する。
    - チェックボックスイメージ
      - [✓] ダイアトニックコード: チェックを入れると、Canvas上のキーに対応するダイアトニックコードが表示される。
      - [ ] 機能和声 (T/D/SD): チェックを入れると、ダイアトニックコードが機能別に色分けされる。
      - [ ] チャーチモード: チェックを入れると、Canvas上の各キーがどのモードに対応するかが表示される。
      - [ ] コード構成音: チェックを入れると、選択したコードの構成音がCanvas上に線で結ばれる。（クロマチックビューで特に有効）

#### C-3: 情報パネル (Information Panel)
- **役割**: Canvas上でユーザーが選択した要素（キー、コード等）に関する詳細なコンテキスト情報を提供し、さらなる学習への起点となる。
- **表示内容**:
    - **選択キー情報**: キー名、調号、スケール構成音、平行調、同主調など。
    - **選択コード情報**: コード名、構成音、機能（Tonic等）、属するキーなど。
    - **音声再生**: 選択されたキーのスケールやコードのサウンドを再生するボタン。
    - **キーワードリンク**: 解説が必要な専門用語からライブラリ画面の該当項目へリンクする。

## 4. 画面連携 (ライブラリへのリンク)
本画面から「ライブラリ」画面へは、ユーザーの思考の流れを妨げない、以下の2種類の導線を提供する。
- **概念リンク**: ユーザーが「このレイヤー（理論）は何か？」を知りたい場合、レイヤー・コントローラーの `(?)` アイコンから、その理論の概要ページへ遷移する。
- **キーワードリンク**: ユーザーが「この単語は何か？」を知りたい場合、情報パネル内の専門用語（例: `平行調`）から、その用語の詳細ページへ遷移する。

## 5. コンポーネント一覧
以下に主要なコンポーネントの一覧を記載する。リンク先に詳細なコンポーネント設計書を記載。
- [CircleOfFifths](../../src/components/CircleOfFifths/README.md)