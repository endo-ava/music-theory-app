# Side Panel è¨­è¨ˆæ›¸

> **ä½œæˆæ—¥**: 2025-07-06  
> **æ›´æ–°æ—¥**: 2025-07-06  
> **ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0  
> **ä½œæˆè€…**: Claude Code

[<< Hubç”»é¢è¨­è¨ˆæ›¸ã«æˆ»ã‚‹](../../../docs/screenDesigns/01.hub.md)

Hubç”»é¢ã®å·¦å´ã«é…ç½®ã•ã‚Œã‚‹ã‚µã‚¤ãƒ‰ãƒ‘ãƒãƒ«æ©Ÿèƒ½ã€‚éŸ³æ¥½ç†è«–ã®è¡¨ç¤ºåˆ¶å¾¡ã¨æƒ…å ±æç¤ºã‚’è¡Œã†ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ«ã¨ã—ã¦æ©Ÿèƒ½ã—ã€å°†æ¥çš„ã«ã¯LayerControllerã€InformationPanelã‚’å«ã‚€çµ±åˆçš„ãªUIç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã¨ãªã‚‹äºˆå®šã§ã™ã€‚

## ğŸ“‹ ç›®æ¬¡

- [æ¦‚è¦](#æ¦‚è¦)
- [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
- [æŠ€è¡“ä»•æ§˜](#æŠ€è¡“ä»•æ§˜)
- [ä½¿ç”¨æ–¹æ³•](#ä½¿ç”¨æ–¹æ³•)
- [è¨­è¨ˆæ€æƒ³](#è¨­è¨ˆæ€æƒ³)
- [ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹](#ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹)
- [ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£](#ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£)
- [é–‹ç™ºãƒ»ä¿å®ˆ](#é–‹ç™ºä¿å®ˆ)

## æ¦‚è¦

### ç›®çš„ãƒ»å½¹å‰²

Hubç”»é¢ã«ãŠã„ã¦éŸ³æ¥½ç†è«–ã®å¯è¦–åŒ–ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã™ã‚‹çµ±åˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨ã—ã¦è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒéŸ³æ¥½ç†è«–ã®ã€Œä¸–ç•Œè¦³ï¼ˆãƒ¬ãƒ³ã‚ºï¼‰ã€ã‚’é¸æŠã—ã€å°†æ¥çš„ã«ã¯è¡¨ç¤ºãƒ¬ã‚¤ãƒ¤ãƒ¼ã®åˆ¶å¾¡ã‚„è©³ç´°æƒ…å ±ã®è¡¨ç¤ºã‚’ä¸€å…ƒç®¡ç†ã™ã‚‹å½¹å‰²ã‚’æ‹…ã„ã¾ã™ã€‚

### ä¸»è¦æ©Ÿèƒ½

- **ViewController (C-1)**: Hubç¨®é¡ï¼ˆäº”åº¦åœ â‡” ã‚¯ãƒ­ãƒãƒãƒƒã‚¯ã‚µãƒ¼ã‚¯ãƒ«ï¼‰ã®åˆ‡ã‚Šæ›¿ãˆ
- **çµ±åˆã‚»ã‚¯ã‚·ãƒ§ãƒ³**: å…¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’çµ±ä¸€ã•ã‚ŒãŸã‚»ã‚¯ã‚·ãƒ§ãƒ³å†…ã«é…ç½®
- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ**: PCç‰ˆã®ã¿å®Ÿè£…æ¸ˆã¿ã€ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œã¯å°†æ¥å®Ÿè£…äºˆå®š
- **ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒ**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã®ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒã«çµ±åˆ

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆ

**SidePanel**ã¯ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠã¨ã—ã¦æ©Ÿèƒ½ã—ã€å†…éƒ¨ã«çµ±ä¸€ã•ã‚ŒãŸã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’æŒã¡ã¾ã™ã€‚ç¾åœ¨ã¯ViewControllerï¼ˆC-1ï¼‰ã®ã¿ã‚’å«ã¿ã¾ã™ãŒã€å°†æ¥çš„ã«LayerControllerï¼ˆC-2ï¼‰ã€InformationPanelï¼ˆC-3ï¼‰ãŒè¿½åŠ ã•ã‚Œã‚‹è¨­è¨ˆã¨ãªã£ã¦ã„ã¾ã™ã€‚

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆå›³

```mermaid
graph TD
    A[SidePanel] --> B[Section Container]
    B --> C[Header]
    B --> D[ViewController C-1]
    B --> E[Future: LayerController C-2]
    B --> F[Future: InformationPanel C-3]
    D --> G[Hub Toggle Buttons]
    D --> H[Description Area]
    G --> I[HubStore]
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å›³

```mermaid
flowchart LR
    A[Page Layout] -->|Props| B[SidePanel]
    B -->|Render| C[ViewController]
    C -->|Hub Selection| D[HubStore]
    D -->|State Change| E[Canvas/HubTitle]
    F[Shared Hub Constants] -->|Data| C
    C -->|User Interaction| D
```

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 

```
src/features/side-panel/
â”œâ”€â”€ README.md                     # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ index.ts                      # ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆçµ±åˆ
â”œâ”€â”€ types.ts                      # å‹å®šç¾©
â”œâ”€â”€ components/                   # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ SidePanel.tsx            # ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ
â”‚   â””â”€â”€ ViewController.tsx       # Hubåˆ‡ã‚Šæ›¿ãˆUI
â”œâ”€â”€ hooks/                       # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ï¼ˆå°†æ¥ä½¿ç”¨ï¼‰
â””â”€â”€ __stories__/                 # Storybookã‚¹ãƒˆãƒ¼ãƒªãƒ¼
    â”œâ”€â”€ SidePanel.stories.tsx
    â””â”€â”€ ViewController.stories.tsx
```

### ä¾å­˜é–¢ä¿‚

#### å†…éƒ¨ä¾å­˜

- `@/shared/constants/hubs` - Hubå…±é€šãƒ‡ãƒ¼ã‚¿æ§‹é€ ã¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
- `@/shared/types` - å…±é€šå‹å®šç¾©ï¼ˆHubType, HubInfo, ClassNamePropsï¼‰
- `@/stores/hubStore` - HubçŠ¶æ…‹ç®¡ç†ï¼ˆZustandï¼‰

#### å¤–éƒ¨ä¾å­˜

- `react` - Reactãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- `tailwind-merge` - Tailwindã‚¯ãƒ©ã‚¹æœ€é©åŒ–
- `zustand` - çŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

## æŠ€è¡“ä»•æ§˜

### Propsä»•æ§˜

#### SidePanel

```typescript
interface SidePanelProps extends ClassNameProps {
  /** ãƒ‘ãƒãƒ«ã®è¡¨ç¤ºçŠ¶æ…‹ */
  isVisible?: boolean;
}
```

#### ViewController

```typescript
interface ViewControllerProps extends ClassNameProps {
  /** ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è¦‹å‡ºã— */
  title?: string;
}
```

### çŠ¶æ…‹ç®¡ç†

#### ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ (Zustand)

```typescript
interface HubState {
  /** ç¾åœ¨ã®Hubç¨®é¡ */
  hubType: HubType;
  /** Hubç¨®é¡ã‚’è¨­å®šã™ã‚‹ */
  setHubType: (hubType: HubType) => void;
}
```

### å…±é€šãƒ‡ãƒ¼ã‚¿æ§‹é€ 

```typescript
interface HubInfo {
  /** æ—¥æœ¬èªå */
  nameJa: string;
  /** è‹±èªå */
  nameEn: string;
  /** èª¬æ˜æ–‡ */
  description: string;
  /** UIè¡¨ç¤ºç”¨çŸ­ç¸®åï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ */
  shortName?: string;
}
```

### APIä»•æ§˜

#### å…¬é–‹ãƒ¡ã‚½ãƒƒãƒ‰

| é–¢æ•°å                | å¼•æ•°               | æˆ»ã‚Šå€¤                               | èª¬æ˜                           |
| --------------------- | ------------------ | ------------------------------------ | ------------------------------ |
| `getHubDisplayNameEn` | `hubType: HubType` | `string`                             | Hubè‹±èªåã‚’å–å¾—                |
| `getHubOptions`       | ãªã—               | `Array<{value, label, description}>` | ViewControllerç”¨ã‚ªãƒ—ã‚·ãƒ§ãƒ³é…åˆ— |

#### ã‚¤ãƒ™ãƒ³ãƒˆ

| ã‚¤ãƒ™ãƒ³ãƒˆå        | ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰             | èª¬æ˜          |
| ----------------- | ---------------------- | ------------- |
| `onHubTypeChange` | `{ hubType: HubType }` | Hubç¨®é¡å¤‰æ›´æ™‚ |

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬çš„ãªä½¿ç”¨

```tsx
import { SidePanel } from '@/features/side-panel';

function HubPage() {
  return (
    <div className="flex h-screen">
      <div className="flex-1">
        <SidePanel />
      </div>
      <div className="flex-1">{/* Canvas ãªã© */}</div>
    </div>
  );
}
```

### ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºä¾‹

```tsx
import { SidePanel, ViewController } from '@/features/side-panel';

function CustomHubPage() {
  return (
    <div className="flex h-screen">
      {/* éè¡¨ç¤ºçŠ¶æ…‹ */}
      <SidePanel isVisible={false} />

      {/* ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¿ã‚¤ãƒ« */}
      <SidePanel className="border-l-4 border-blue-500" />

      {/* ViewController å˜ä½“ä½¿ç”¨ */}
      <ViewController title="ãƒ“ãƒ¥ãƒ¼ã®é¸æŠ" />
    </div>
  );
}
```

## è¨­è¨ˆæ€æƒ³

### 1. å˜ä¸€è²¬ä»»åŸå‰‡

SidePanelã¯ã€ŒHubç”»é¢ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«UIç®¡ç†ã€ã¨ã„ã†å˜ä¸€ã®è²¬ä»»ã‚’æŒã¡ã¾ã™ã€‚è¡¨ç¤ºåˆ¶å¾¡ã€çŠ¶æ…‹ç®¡ç†ã¨ã®é€£æºã€å°†æ¥ã®æ‹¡å¼µæ€§ã‚’è€ƒæ…®ã—ãŸçµ±åˆã‚³ãƒ³ãƒ†ãƒŠã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚

### 2. å†åˆ©ç”¨æ€§

ViewControllerã¯ç‹¬ç«‹ã—ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã—ã¦è¨­è¨ˆã•ã‚Œã€SidePanelä»¥å¤–ã§ã‚‚ä½¿ç”¨å¯èƒ½ã§ã™ã€‚å…±é€šãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®æ´»ç”¨ã«ã‚ˆã‚Šã€ä»–ã®ç”»é¢ã§ã®Hubåˆ‡ã‚Šæ›¿ãˆUIã¨ã—ã¦ã‚‚åˆ©ç”¨ã§ãã¾ã™ã€‚

### 3. ä¿å®ˆæ€§

- Hubæƒ…å ±ã®ä¸€å…ƒç®¡ç†ã«ã‚ˆã‚Šã€ãƒ‡ãƒ¼ã‚¿å¤‰æ›´æ™‚ã®å½±éŸ¿ã‚’æœ€å°åŒ–
- çµ±ä¸€ã•ã‚ŒãŸã‚»ã‚¯ã‚·ãƒ§ãƒ³æ§‹é€ ã«ã‚ˆã‚Šã€å°†æ¥ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¿½åŠ ãŒå®¹æ˜“
- å‹å®‰å…¨æ€§ã«ã‚ˆã‚Šã€TypeScriptã«ã‚ˆã‚‹é™çš„ãƒã‚§ãƒƒã‚¯ãŒåŠ¹æœçš„

### 4. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

- Client Componentã‚’å¿…è¦æœ€å°é™ã«æŠ‘åˆ¶
- `twMerge`ã«ã‚ˆã‚‹åŠ¹ç‡çš„ãªã‚¯ãƒ©ã‚¹åç®¡ç†
- çŠ¶æ…‹å¤‰æ›´æ™‚ã®å¿…è¦æœ€å°é™ãªå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°

### 5. ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£

- ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯HTMLæ§‹é€ ã®æ¡ç”¨
- é©åˆ‡ãªARIAå±æ€§ã«ã‚ˆã‚‹æ”¯æ´æŠ€è¡“å¯¾å¿œ
- ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³å®Œå…¨å¯¾å¿œ

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

### æœ€é©åŒ–æ‰‹æ³•

- **Client Componentæœ€å°åŒ–**: çŠ¶æ…‹ç®¡ç†ãŒå¿…è¦ãªéƒ¨åˆ†ã®ã¿ã‚’Client ComponentåŒ–
- **ãƒ¡ãƒ¢åŒ–**: Hubå®šæ•°ãƒ‡ãƒ¼ã‚¿ã®åŠ¹ç‡çš„ãªæ´»ç”¨
- **ãƒ¬ã‚¤ã‚¸ãƒ¼ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°**: å°†æ¥ã®C-2ã€C-3å®Ÿè£…æ™‚ã®å‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆå¯¾å¿œæº–å‚™

## ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£

### WCAGæº–æ‹ ãƒ¬ãƒ™ãƒ«

**ãƒ¬ãƒ™ãƒ« AA** ã«æº–æ‹ 

### å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½

- **ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³**: Tabã€Enterã€Spaceã‚­ãƒ¼ã§ã®æ“ä½œ
- **ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œ**: `role="radiogroup"`ã€`aria-checked`ç­‰ã®é©åˆ‡ãªè¨­å®š
- **ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç®¡ç†**: è¦–è¦šçš„ãªãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒªãƒ³ã‚°è¡¨ç¤º
- **ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒå¯¾å¿œ**: é«˜ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”ã®å®Ÿç¾

### ARIAå±æ€§

| å±æ€§               | å€¤                 | ç”¨é€”                           |
| ------------------ | ------------------ | ------------------------------ |
| `aria-label`       | "ã‚µã‚¤ãƒ‰ãƒ‘ãƒãƒ«"     | ãƒ‘ãƒãƒ«å…¨ä½“ã®èª¬æ˜               |
| `aria-labelledby`  | "side-panel-title" | ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒˆãƒ«ã¨ã®é–¢é€£ä»˜ã‘ |
| `aria-checked`     | `true/false`       | Hubé¸æŠçŠ¶æ…‹                    |
| `aria-describedby` | "hub-description"  | Hubèª¬æ˜ã¨ã®é–¢é€£ä»˜ã‘            |

### ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ

| ã‚­ãƒ¼          | å‹•ä½œ                     |
| ------------- | ------------------------ |
| `Tab`         | æ¬¡ã®è¦ç´ ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç§»å‹• |
| `Shift + Tab` | å‰ã®è¦ç´ ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç§»å‹• |
| `Enter/Space` | Hubç¨®é¡ã®åˆ‡ã‚Šæ›¿ãˆ        |

## é–‹ç™ºãƒ»ä¿å®ˆ

### ä»Šå¾Œã®æ‹¡å¼µäºˆå®š

#### çŸ­æœŸ

- [ ] LayerController (C-2) ã®å®Ÿè£…
- [ ] InformationPanel (C-3) ã®å®Ÿè£…
- [ ] ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œï¼ˆãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆå½¢å¼ï¼‰

#### é•·æœŸ

- [ ] ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœã®è¿½åŠ 
- [ ] ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆå¯¾å¿œ
- [ ] å¤šè¨€èªå¯¾å¿œ

### é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [è¦ä»¶å®šç¾©æ›¸](../../../docs/01.requirements.md)
- [Hubç”»é¢è¨­è¨ˆæ›¸](../../../docs/screenDesigns/01.hub.md)
- [é–‹ç™ºè¦ç´„](../../../docs/03.developmentAgreement.md)
- [Hubå…±é€šãƒ‡ãƒ¼ã‚¿æ§‹é€ ](../../../src/shared/constants/hubs.ts)
- [Storybook](http://localhost:6006/?path=/story/components-sidepanel)

### ç”¨èªé›†

| ç”¨èª             | å®šç¾©                                                                           |
| ---------------- | ------------------------------------------------------------------------------ |
| Hub              | éŸ³æ¥½ç†è«–ã‚’åˆ†æã™ã‚‹ãŸã‚ã®ã€Œä¸–ç•Œè¦³ï¼ˆãƒ¬ãƒ³ã‚ºï¼‰ã€ï¼ˆäº”åº¦åœã€ã‚¯ãƒ­ãƒãƒãƒƒã‚¯ã‚µãƒ¼ã‚¯ãƒ«ç­‰ï¼‰ |
| ViewController   | Hubç¨®é¡ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆC-1ï¼‰                                     |
| LayerController  | è¡¨ç¤ºãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’åˆ¶å¾¡ã™ã‚‹UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆC-2ã€å°†æ¥å®Ÿè£…ï¼‰                        |
| InformationPanel | é¸æŠè¦ç´ ã®è©³ç´°æƒ…å ±ã‚’è¡¨ç¤ºã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆC-3ã€å°†æ¥å®Ÿè£…ï¼‰                    |

---

> ğŸ“ **Note**: ã“ã®è¨­è¨ˆæ›¸ã¯ [é–‹ç™ºè¦ç´„](../../../docs/03.developmentAgreement.md) ã«å¾“ã£ã¦ä½œæˆã•ã‚Œã¦ã„ã¾ã™ã€‚  
> ğŸ”„ **Update**: æ©Ÿèƒ½è¿½åŠ ãƒ»å¤‰æ›´æ™‚ã¯ã“ã®è¨­è¨ˆæ›¸ã‚‚åˆã‚ã›ã¦æ›´æ–°ã—ã¦ãã ã•ã„ã€‚  
> ğŸ¤ **Collaboration**: ä¸æ˜ãªç‚¹ãŒã‚ã‚Œã°é–‹ç™ºãƒãƒ¼ãƒ ã¾ã§ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚
