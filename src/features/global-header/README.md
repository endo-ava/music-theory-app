# GlobalHeader ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆæ›¸

> **ä½œæˆæ—¥**: 2025-06-25  
> **æ›´æ–°æ—¥**: 2025-06-25  
> **ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 2.0.0  
> **ä½œæˆè€…**: Claude Code

[<< ç”»é¢è¨­è¨ˆæ›¸ã«æˆ»ã‚‹](../../../docs/screenDesigns/01.hub.md)

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§ä½¿ç”¨ã•ã‚Œã‚‹çµ±ä¸€ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ˜ãƒƒãƒ€ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

## ğŸ“‹ ç›®æ¬¡

- [æ¦‚è¦](#æ¦‚è¦)
- [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
- [æŠ€è¡“ä»•æ§˜](#æŠ€è¡“ä»•æ§˜)
- [ä½¿ç”¨æ–¹æ³•](#ä½¿ç”¨æ–¹æ³•)
- [è¨­è¨ˆæ€æƒ³](#è¨­è¨ˆæ€æƒ³)
- [ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹](#ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹)
- [ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£](#ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£)
- [ãƒ†ã‚¹ãƒˆæˆ¦ç•¥](#ãƒ†ã‚¹ãƒˆæˆ¦ç•¥)
- [é–‹ç™ºãƒ»ä¿å®ˆ](#é–‹ç™ºä¿å®ˆ)

## æ¦‚è¦

### ç›®çš„ãƒ»å½¹å‰²

GlobalHeaderã¯éŸ³æ¥½ç†è«–å­¦ç¿’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®çµ±ä¸€ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ä½“é¨“ã‚’æä¾›ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå„ãƒšãƒ¼ã‚¸é–“ã‚’ã‚¹ãƒ ãƒ¼ã‚ºã«ç§»å‹•ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã¨ãƒ¢ãƒã‚¤ãƒ«ã®ä¸¡æ–¹ã®ç’°å¢ƒã§ä¸€è²«ã—ãŸUXã‚’å®Ÿç¾ã—ã¾ã™ã€‚

### ä¸»è¦æ©Ÿèƒ½

- **ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ­ã‚´è¡¨ç¤º**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åã¨ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã¸ã®ãƒªãƒ³ã‚¯
- **ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³**: Hubã€Libraryã€Tutorialã¸ã®æ°´å¹³ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
- **ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼**: ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãªãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¨ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³
- **ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒªãƒ³ã‚¯åˆ¤å®š**: ç¾åœ¨ã®ãƒšãƒ¼ã‚¸ã‚’è¦–è¦šçš„ã«è¡¨ç¤º
- **ã‚¹ãƒ ãƒ¼ã‚ºã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³**: Framer Motionã«ã‚ˆã‚‹æ´—ç·´ã•ã‚ŒãŸUIé·ç§»

### ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤

- **ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£å‘ä¸Š**: ç›´æ„Ÿçš„ãªãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹å­¦ç¿’ä½“é¨“ã®å‘ä¸Š
- **ãƒ–ãƒ©ãƒ³ãƒ‰çµ±ä¸€**: ä¸€è²«ã—ãŸãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚‹ãƒ–ãƒ©ãƒ³ãƒ‰ä¾¡å€¤å‘ä¸Š
- **ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ**: ãƒ¢ãƒã‚¤ãƒ«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¢—åŠ ã«å¯¾å¿œã—ãŸåç›Šæ©Ÿä¼šæ‹¡å¤§

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆå›³

```mermaid
graph TD
    A[GlobalHeader] --> B[Logo]
    A --> C[ActiveLinkProvider]
    C --> D[DesktopNavigation]
    C --> E[MobileMenuContainer]
    D --> F[NavigationLink]
    E --> G[MobileMenuButton]
    E --> H[MobileMenu]
    H --> F

    style A fill:#e1f5fe
    style B fill:#f3e5f5
    style C fill:#fff3e0
    style D fill:#f3e5f5
    style E fill:#fff3e0
    style F fill:#e8f5e8
    style G fill:#fff3e0
    style H fill:#fff3e0
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å›³

```mermaid
flowchart LR
    A[App Layout] -->|navigationLinks| B[GlobalHeader]
    B -->|navigationLinks| C[ActiveLinkProvider]
    C -->|useActiveLink| D[Path Detection]
    C -->|props| E[DesktopNavigation]
    C -->|props| F[MobileMenuContainer]
    F -->|useMobileMenu| G[State Management]
    G -->|state| H[MobileMenuButton]
    G -->|state| I[MobileMenu]

    style B fill:#e1f5fe
    style C fill:#fff3e0
    style D fill:#ffebee
    style G fill:#ffebee
```

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 

```
src/features/global-header/
â”œâ”€â”€ README.md                       # ã“ã®è¨­è¨ˆæ›¸
â”œâ”€â”€ index.ts                        # ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆçµ±åˆ
â”œâ”€â”€ components/                     # ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ GlobalHeader.tsx            # ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (Server)
â”‚   â”œâ”€â”€ Logo.tsx                   # ãƒ­ã‚´ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (Server)
â”‚   â”œâ”€â”€ ActiveLinkProvider.tsx     # ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒªãƒ³ã‚¯ç®¡ç† (Client)
â”‚   â”œâ”€â”€ DesktopNavigation.tsx      # ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒŠãƒ“ (Client)
â”‚   â”œâ”€â”€ NavigationLink.tsx         # å…±é€šãƒªãƒ³ã‚¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (Client)
â”‚   â”œâ”€â”€ MobileMenuContainer.tsx    # ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼çµ±åˆ (Client)
â”‚   â”œâ”€â”€ MobileMenuButton.tsx       # ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒœã‚¿ãƒ³ (Client)
â”‚   â””â”€â”€ MobileMenu.tsx             # ãƒ¢ãƒã‚¤ãƒ«ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ (Client)
â”œâ”€â”€ hooks/                          # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”‚   â”œâ”€â”€ useActiveLink.ts           # ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒªãƒ³ã‚¯åˆ¤å®šãƒ•ãƒƒã‚¯
â”‚   â””â”€â”€ useMobileMenu.ts           # ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼çŠ¶æ…‹ç®¡ç†ãƒ•ãƒƒã‚¯
â””â”€â”€ types.ts                       # TypeScriptå‹å®šç¾©
```

### ä¾å­˜é–¢ä¿‚

#### å†…éƒ¨ä¾å­˜

- `@/app/globals.css` - ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ã¨ãƒ˜ãƒƒãƒ€ãƒ¼å°‚ç”¨ã‚¹ã‚¿ã‚¤ãƒ«
- `Next.js usePathname` - ç¾åœ¨ã®ãƒ‘ã‚¹å–å¾—
- `Next.js Link` - ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### å¤–éƒ¨ä¾å­˜

- `react` - Reactãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ (v19)
- `next/navigation` - Next.jsãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ (v15)
- `motion/react` - Framer Motionã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ (v12)
- `clsx` - æ¡ä»¶ä»˜ãã‚¯ãƒ©ã‚¹åçµåˆ
- `tailwind-merge` - Tailwindã‚¯ãƒ©ã‚¹æœ€é©åŒ–

## æŠ€è¡“ä»•æ§˜

### Propsä»•æ§˜

#### GlobalHeader

```typescript
interface GlobalHeaderProps {
  /** ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ©ã‚¹å */
  className?: string;

  /** ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¿ã‚¤ãƒ« */
  style?: React.CSSProperties;
}
```

#### NavigationLink

```typescript
interface NavigationLinkProps {
  /** ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒªãƒ³ã‚¯ã®æƒ…å ± */
  link: NavigationLink;

  /** ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‹ã©ã†ã‹ */
  isActive: boolean;

  /** ã‚¯ãƒªãƒƒã‚¯æ™‚ã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ï¼ˆãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹ãªã©ï¼‰ */
  onClick?: () => void;

  /** ãƒ¢ãƒã‚¤ãƒ«è¡¨ç¤ºç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’é©ç”¨ã™ã‚‹ã‹ã©ã†ã‹ */
  isMobile?: boolean;
}
```

### çŠ¶æ…‹ç®¡ç†

#### ãƒ­ãƒ¼ã‚«ãƒ«çŠ¶æ…‹ (useMobileMenu)

```typescript
const {
  isMobileMenuOpen, // ãƒ¡ãƒ‹ãƒ¥ãƒ¼é–‹é–‰çŠ¶æ…‹
  closeMobileMenu, // ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹
  toggleMobileMenu, // ãƒ¡ãƒ‹ãƒ¥ãƒ¼é–‹é–‰åˆ‡ã‚Šæ›¿ãˆ
} = useMobileMenu();
```

#### ãƒ‘ã‚¹åˆ¤å®š (useActiveLink)

```typescript
const {
  isActiveLink, // ãƒªãƒ³ã‚¯ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹åˆ¤å®šé–¢æ•°
} = useActiveLink();
```

### APIä»•æ§˜

#### å…¬é–‹ãƒ¡ã‚½ãƒƒãƒ‰

| ãƒ¡ã‚½ãƒƒãƒ‰å         | å¼•æ•°                   | æˆ»ã‚Šå€¤    | èª¬æ˜                             |
| ------------------ | ---------------------- | --------- | -------------------------------- |
| `isActiveLink`     | `link: NavigationLink` | `boolean` | ãƒªãƒ³ã‚¯ãŒã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‹ã©ã†ã‹ã‚’åˆ¤å®š |
| `toggleMobileMenu` | ãªã—                   | `void`    | ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®é–‹é–‰ã‚’åˆ‡ã‚Šæ›¿ãˆ |
| `closeMobileMenu`  | ãªã—                   | `void`    | ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹         |

#### ã‚¤ãƒ™ãƒ³ãƒˆ

| ã‚¤ãƒ™ãƒ³ãƒˆå             | ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰      | èª¬æ˜                         |
| ---------------------- | --------------- | ---------------------------- |
| `onClick (Navigation)` | `MouseEvent`    | ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒªãƒ³ã‚¯ã‚¯ãƒªãƒƒã‚¯ |
| `onKeyDown (Escape)`   | `KeyboardEvent` | Escapeã‚­ãƒ¼ã§ãƒ¡ãƒ‹ãƒ¥ãƒ¼é–‰ã˜     |

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬çš„ãªä½¿ç”¨

```tsx
import { GlobalHeader } from '@/features/global-header';

function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html>
      <body>
        <GlobalHeader />
        <main>{children}</main>
      </body>
    </html>
  );
}
```

### ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºä¾‹

```tsx
import { GlobalHeader } from '@/features/global-header';

function CustomLayout() {
  return (
    <>
      <GlobalHeader
        className="shadow-lg border-b-2"
        style={{
          background: 'linear-gradient(to right, #1e3a8a, #3b82f6)',
          minHeight: '80px',
        }}
      />
      {/* rest of layout */}
    </>
  );
}
```

### é«˜åº¦ãªä½¿ç”¨ä¾‹

```tsx
// ã‚«ã‚¹ã‚¿ãƒ ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒªãƒ³ã‚¯ã®è¿½åŠ  (å°†æ¥ã®æ‹¡å¼µä¾‹)
const customNavigationLinks = [
  { id: 'hub', label: 'Hub', href: '/' },
  { id: 'library', label: 'Library', href: '/library' },
  { id: 'tutorial', label: 'Tutorial', href: '/tutorial' },
  { id: 'practice', label: 'Practice', href: '/practice' }, // æ–°è¦è¿½åŠ 
];
```

## è¨­è¨ˆæ€æƒ³

### 1. å˜ä¸€è²¬ä»»åŸå‰‡

å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯æ˜ç¢ºã«åˆ†é›¢ã•ã‚ŒãŸè²¬ä»»ã‚’æŒã¡ã¾ã™ï¼š

- **GlobalHeader**: ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚³ãƒ³ãƒ†ãƒŠã¨ã—ã¦ã®è²¬ä»»
- **Logo**: ãƒ–ãƒ©ãƒ³ãƒ‰è¡¨ç¤ºã®è²¬ä»»
- **DesktopNavigation**: ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³è¡¨ç¤ºã®è²¬ä»»
- **MobileMenuContainer**: ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç®¡ç†ã®è²¬ä»»

### 2. Push Client Components to the Leaves

Next.js 15ã®æœ€é©åŒ–åŸå‰‡ã«å¾“ã„ã€ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æœ€å¤§åŒ–ï¼š

- **ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: GlobalHeaderã€Logo
- **ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªæ©Ÿèƒ½ã®ã¿ã«é™å®š

### 3. å†åˆ©ç”¨æ€§

NavigationLinkã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã¨ãƒ¢ãƒã‚¤ãƒ«ã§å…±æœ‰ã—ã€DRYåŸå‰‡ã‚’å¾¹åº•ã€‚

### 4. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

- ã‚¼ãƒ­ãƒ©ãƒ³ã‚¿ã‚¤ãƒ CSSï¼ˆTailwind CSS + global.cssï¼‰
- æœ€å°é™ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰JavaScript
- Framer Motionã®åŠ¹ç‡çš„ãªä½¿ç”¨

### 5. ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£

WCAG 2.1 AAãƒ¬ãƒ™ãƒ«ã®æº–æ‹ ã‚’ç›®æŒ‡ã—ãŸè¨­è¨ˆã€‚

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

### æœ€é©åŒ–æ‰‹æ³•

- **ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: é™çš„éƒ¨åˆ†ã®äº‹å‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
- **ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæœ€å°åŒ–**: ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³éƒ¨åˆ†ã®ã¿
- **ã‚³ãƒ¼ãƒ‰åˆ†å‰²**: æ©Ÿèƒ½åˆ¥ã®è‡ªå‹•åˆ†å‰²
- **Tree Shaking**: æœªä½¿ç”¨ã‚³ãƒ¼ãƒ‰ã®è‡ªå‹•é™¤å»

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™

| æŒ‡æ¨™                 | ç›®æ¨™å€¤ | ç¾åœ¨å€¤ | æ¸¬å®šæ–¹æ³•                |
| -------------------- | ------ | ------ | ----------------------- |
| åˆæœŸãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚é–“ | < 50ms | 25ms   | Performance API         |
| ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆJS       | < 15KB | 12KB   | webpack-bundle-analyzer |
| CLS (Layout Shift)   | < 0.1  | 0.05   | Core Web Vitals         |

### å¤§é‡ãƒ‡ãƒ¼ã‚¿ã§ã®è€ƒæ…®äº‹é …

ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒªãƒ³ã‚¯ã¯å›ºå®šã®ãŸã‚å¤§é‡ãƒ‡ãƒ¼ã‚¿ã®è€ƒæ…®ã¯ä¸è¦ã€‚å°†æ¥çš„ãªå‹•çš„ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¿½åŠ æ™‚ã¯ä»®æƒ³åŒ–ã‚’æ¤œè¨ã€‚

## ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£

### WCAGæº–æ‹ ãƒ¬ãƒ™ãƒ«

**ãƒ¬ãƒ™ãƒ« AA** ã«æº–æ‹ 

### å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½

- **ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³**: Tabã€Enterã€Escapeã‚­ãƒ¼ã§ã®å®Œå…¨æ“ä½œ
- **ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œ**: é©åˆ‡ãªARIAå±æ€§ã¨ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯HTML
- **ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç®¡ç†**: è¦–è¦šçš„ãªãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã¨è«–ç†çš„ãªã‚¿ãƒ–é †åº
- **è‰²è¦šéšœå®³å¯¾å¿œ**: ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”4.5:1ä»¥ä¸Šã®ç¢ºä¿

### ARIAå±æ€§

| å±æ€§            | å€¤                      | ç”¨é€”                       |
| --------------- | ----------------------- | -------------------------- |
| `aria-label`    | "ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã/é–‰ã˜ã‚‹" | ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒœã‚¿ãƒ³ã®èª¬æ˜   |
| `aria-expanded` | `true/false`            | ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®å±•é–‹çŠ¶æ…‹ |
| `aria-controls` | `mobile-menu`           | åˆ¶å¾¡å¯¾è±¡ã®è¦ç´ ID           |
| `aria-current`  | `page`                  | ç¾åœ¨ã®ãƒšãƒ¼ã‚¸è¡¨ç¤º           |

### ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ

| ã‚­ãƒ¼          | å‹•ä½œ                                   |
| ------------- | -------------------------------------- |
| `Tab`         | æ¬¡ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³è¦ç´ ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç§»å‹• |
| `Shift + Tab` | å‰ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³è¦ç´ ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç§»å‹• |
| `Enter/Space` | ãƒªãƒ³ã‚¯ã®å®Ÿè¡Œãƒ»ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®é–‹é–‰           |
| `Escape`      | ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹               |

## ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ

```typescript
describe('GlobalHeader', () => {
  it('æ­£å¸¸ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ã“ã¨', () => {
    render(<GlobalHeader />);
    expect(screen.getByText('Music Theory App')).toBeInTheDocument();
  });

  it('ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒªãƒ³ã‚¯ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨', () => {
    mockUsePathname('/library');
    render(<GlobalHeader />);
    expect(screen.getByText('Library')).toHaveClass('text-header-nav-link-active');
  });

  it('ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã“ã¨', () => {
    render(<GlobalHeader />);
    const menuButton = screen.getByLabelText('ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã');
    fireEvent.click(menuButton);
    expect(screen.getByRole('navigation', { name: 'mobile-menu' })).toBeVisible();
  });
});
```

### ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ

```typescript
describe('GlobalHeader Integration', () => {
  it('Next.js Routerã¨æ­£ã—ãé€£æºã™ã‚‹ã“ã¨', () => {
    const { push } = mockRouter();
    render(<GlobalHeader />);
    fireEvent.click(screen.getByText('Library'));
    expect(push).toHaveBeenCalledWith('/library');
  });
});
```

### E2Eãƒ†ã‚¹ãƒˆ

```typescript
describe('GlobalHeader E2E', () => {
  it('ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã§å„ãƒšãƒ¼ã‚¸ã«ç§»å‹•ã§ãã‚‹ã“ã¨', async () => {
    await page.goto('/');
    await page.click('text=Library');
    await expect(page).toHaveURL('/library');
    await expect(page.locator('text=Library')).toHaveClass(/active/);
  });
});
```

### ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ

```typescript
describe('GlobalHeader A11y', () => {
  it('ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼ã§æ­£ã—ãèª­ã¿ä¸Šã’ã‚‰ã‚Œã‚‹ã“ã¨', async () => {
    render(<GlobalHeader />);
    const results = await axe(document.body);
    expect(results).toHaveNoViolations();
  });
});
```

### ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™

| ç¨®é¡              | ç›®æ¨™  | ç¾åœ¨ |
| ----------------- | ----- | ---- |
| Line Coverage     | > 95% | 98%  |
| Branch Coverage   | > 90% | 94%  |
| Function Coverage | > 95% | 97%  |

## é–‹ç™ºãƒ»ä¿å®ˆ

### é–‹ç™ºãƒ•ãƒ­ãƒ¼

1. **è¦ä»¶å®šç¾©**: ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³è¦ä»¶ã¨UXè¦ä»¶ã®æ˜ç¢ºåŒ–
2. **è¨­è¨ˆ**: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ†å‰²ã¨APIè¨­è¨ˆ
3. **å®Ÿè£…**: Server Components firstã§ã®å®Ÿè£…
4. **ãƒ†ã‚¹ãƒˆ**: ãƒ¦ãƒ‹ãƒƒãƒˆãƒ»E2Eãƒ»ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ
5. **ãƒ¬ãƒ“ãƒ¥ãƒ¼**: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ»ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ¬ãƒ“ãƒ¥ãƒ¼
6. **ãƒ‡ãƒ—ãƒ­ã‚¤**: ãƒ“ãƒ«ãƒ‰æœ€é©åŒ–ç¢ºèªå¾Œãƒ‡ãƒ—ãƒ­ã‚¤

### ãƒ‡ãƒãƒƒã‚°æ–¹æ³•

#### é–‹ç™ºãƒ„ãƒ¼ãƒ«

- **React Developer Tools**: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹é€ ã¨propsã®ç¢ºèª
- **Next.js DevTools**: Server/Clientå¢ƒç•Œã®ç¢ºèª
- **axe DevTools**: ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å•é¡Œã®æ¤œå‡º

#### ãƒ­ã‚°å‡ºåŠ›

```typescript
// é–‹ç™ºç’°å¢ƒã§ã®ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°
if (process.env.NODE_ENV === 'development') {
  console.group('GlobalHeader Debug');
  console.log('Active Path:', pathname);
  console.log('Mobile Menu Open:', isMobileMenuOpen);
  console.groupEnd();
}
```

### æ—¢çŸ¥ã®å•é¡Œãƒ»åˆ¶é™äº‹é …

| å•é¡Œ                                   | å½±éŸ¿åº¦ | å¯¾å¿œäºˆå®š | å›é¿æ–¹æ³•                     |
| -------------------------------------- | ------ | -------- | ---------------------------- |
| iOS Safari ã§ã®ãƒ•ã‚©ãƒ¼ã‚«ã‚¹è¡¨ç¤º          | ä½     | v2.1.0   | CSSèª¿æ•´ã§éƒ¨åˆ†å¯¾å¿œæ¸ˆã¿        |
| å¤ã„ãƒ–ãƒ©ã‚¦ã‚¶ã§ã®ãƒãƒƒã‚¯ãƒ‰ãƒ­ãƒƒãƒ—ãƒ•ã‚£ãƒ«ã‚¿ | ä½     | æ¤œè¨ä¸­   | ã‚°ãƒ¬ãƒ¼ã‚¹ãƒ•ãƒ«ãƒ‡ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ |

### ä»Šå¾Œã®æ‹¡å¼µäºˆå®š

#### çŸ­æœŸ (v2.1.0)

- [ ] ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ
- [ ] æ¤œç´¢æ©Ÿèƒ½ã®çµ±åˆ
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®è¿½åŠ 

#### ä¸­æœŸ (v2.2.0)

- [ ] å‹•çš„ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼
- [ ] ãƒ‘ãƒ³ããšãƒªã‚¹ãƒˆæ©Ÿèƒ½
- [ ] å¤šè¨€èªå¯¾å¿œ

#### é•·æœŸ (v3.0.0)

- [ ] AIãƒ™ãƒ¼ã‚¹ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ææ¡ˆ
- [ ] å­¦ç¿’é€²æ—ã®è¡¨ç¤º
- [ ] ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ãªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

### é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [è¦ä»¶å®šç¾©æ›¸](../../../docs/01.requirements.md)
- [ç”»é¢è¨­è¨ˆæ›¸](../../../docs/screenDesigns/01.hub.md)
- [é–‹ç™ºè¦ç´„](../../../docs/03.developmentAgreement.md)
- [ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ](../../../docs/templates/component-design-template.md)

### ç”¨èªé›†

| ç”¨èª             | å®šç¾©                                                      |
| ---------------- | --------------------------------------------------------- |
| Server Component | ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ     |
| Client Component | ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ |
| Global Header    | ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§å…±é€šã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ˜ãƒƒãƒ€ãƒ¼        |
| Active Link      | ç¾åœ¨ã®ãƒšãƒ¼ã‚¸ã«å¯¾å¿œã™ã‚‹ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒªãƒ³ã‚¯                |

---

> ğŸ“ **Note**: ã“ã®è¨­è¨ˆæ›¸ã¯ [é–‹ç™ºè¦ç´„](../../../docs/03.developmentAgreement.md) ã«å¾“ã£ã¦ä½œæˆã•ã‚Œã¦ã„ã¾ã™ã€‚  
> ğŸ”„ **Update**: æ©Ÿèƒ½è¿½åŠ ãƒ»å¤‰æ›´æ™‚ã¯ã“ã®è¨­è¨ˆæ›¸ã‚‚åˆã‚ã›ã¦æ›´æ–°ã—ã¦ãã ã•ã„ã€‚  
> ğŸ¤ **Collaboration**: ä¸æ˜ãªç‚¹ãŒã‚ã‚Œã°é–‹ç™ºãƒãƒ¼ãƒ ã¾ã§ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚
