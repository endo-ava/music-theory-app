# Hub画面: レイアウト仕様

[<< Hub画面設計トップに戻る](../0003.hub.md)

## 1. レイアウトの基本方針

デバイスの特性に応じて、最適な情報密度と操作性を提供するために、PCとモバイルで異なるレイアウト戦略を採用します。

- **PC (ワイドスクリーン)**:

  - **3カラムレイアウト**を採用し、情報の「**全体像**」「**詳細**」「**操作**」を一覧表示します。これにより、ユーザーは視線移動のみで、複数の情報を比較・検討しながら効率的に探求作業を行えます。

- **モバイル (省スペース)**:
  - **情報・コントロール分離**を徹底します。視覚的な「Hub」と「情報パネル」を常に表示し、没入感を維持。操作系のUIは必要な時にだけ呼び出せる「BottomSheet」に格納し、限られた画面領域を最大限に活用します。

---

## 2. PCレイアウト

### 2.1. 画面構成

| エリア | コンポーネント名          | 役割                                                         |
| :----- | :------------------------ | :----------------------------------------------------------- |
| **A**  | グローバルヘッダー        | アプリケーション全体のナビゲーションを提供します。           |
| **B**  | メイン表示エリア (Canvas) | 音楽理論の視覚的表現（Hub）を描画する中心領域です。          |
| **C**  | コントロールパネル        | Canvasに表示する内容（ビュー、キー、レイヤー）を制御します。 |
| **D**  | インフォメーションパネル  | 選択要素や現在のキーに関する詳細情報を表示します。           |

### 2.2. 構成イメージ

```
+--------------------------------------------------------------------------------------------------+
| A. グローバルヘッダー                                                                            |
+--------------------------------------------------------------------------------------------------+
|                    |                                          |                               |
|   C. コントロール   |   B. メイン表示エリア (Canvas)          |   D. インフォメーション        |
|     パネル         |                                          |      パネル                   |
|                    |   +-------------------------------------+ |                             |
| +----------------+ |   |                                     | | +------------------------+ |
| | C-1: ビュー    | |   |        [現在のキー: C Major]            | | | D-1: 選択要素情報      | |
| | コントローラー | |   |    B-1: 五度圏 / B-2: クロマチック     | | |                        | |
| +----------------+ |   |             サークル                   | | |  - 要素名              | |
| | C-2: キー      | |   |        (Hub Component)                  | | |  - 詳細情報            | |
| | コントローラー | |   |                                     | | |  - 音声再生ボタン      | |
| +----------------+ |   +-------------------------------------+ | +------------------------+ |
| | C-3: レイヤー  | |                                          |                               |
| | コントローラー | |                                          | +------------------------+ |
| | (アコーディオン)| |                                          | | D-2: 現在のキー情報    | |
| +----------------+ |                                          | |                        | |
|                    |                                          | |  - ベースキー表示      | |
|                    |                                          | |  - 関連情報            | |
|                    |                                          | |  - キーワードリンク    | |
|                    |                                          | |                        | |
|                    |                                          | +------------------------+ |
|                    |                                          |                               |
+--------------------------------------------------------------------------------------------------+
```

---

## 3. モバイルレイアウト

### 3.1. 画面構成

| エリア | コンポーネント名          | 役割                                                                 |
| :----- | :------------------------ | :------------------------------------------------------------------- |
| **A**  | グローバルヘッダー        | アプリケーション全体のナビゲーションを提供します。                   |
| **B**  | メイン表示エリア (Canvas) | 音楽理論の視覚的表現（Hub）を描画する中心領域です。                  |
| **C**  | インフォメーションパネル  | Canvasの下に常時表示され、選択要素やキーの情報を表示します。         |
| **E**  | BottomSheet               | PC版のコントロールパネル機能を格納し、必要な時に下から表示されます。 |

### 3.2. 構成イメージ

**基本レイアウト**

```
+------------------------------------------+
| A. グローバルヘッダーナビゲーション       |
+------------------------------------------+
|                                          |
| B. メイン表示エリア (Canvas)               |
|   [現在のキー: C Major]                   |
|    五度圏 / クロマチックサークル           |
|                                          |
+------------------------------------------+
|                                          |
| C. インフォメーションパネル (常時表示)    |
|  - D-1: 選択要素情報                     |
|  - D-2: 現在のキー情報                   |
|                                          |
+------------------------------------------+
```

**BottomSheet表示時**

```
+------------------------------------------+
| A. ヘッダー                              |
+------------------------------------------+
| B. Canvas (縮小表示)                     |
+------------------------------------------+
| C. インフォメーション (縮小)              |
+------------------------------------------+
| E. BottomSheet (Vaulライブラリ使用)      |
| ┌──────────────────────────────────────┐ |
| │ ハンドル (ドラッグ操作用)              │ |
| │ ┌─ Controller ──── × (閉じる) ┐     │ |
| │ │ C-1: ViewController           │     │ |
| │ │ C-2: KeyController            │     │ |
| │ │ C-3: LayerController          │     │ |
| │ └──────────────────────────────┘     │ |
| └──────────────────────────────────────┘ |
+------------------------------------------+
```

### 3.3. モバイル特有のUI/UX仕様

#### BottomSheet (`E`)

- **ライブラリ**: `Vaul` を使用し、ネイティブアプリのような滑らかなドラッグ操作を実現します。
- **スナップポイント**: ユーザーの意図に合わせて3段階の高さに変化します（最小: 6%, 中間: 50%, 最大: 85%）。
- **表示/非表示**:
  - **表示トリガー**: 画面下部の専用トリガーボタン（未実装）をタップします。
  - **非表示トリガー**: ハンドルの下方向スワイプ、背景オーバーレイのタップ、または閉じるボタン（×）のタップで最小化します。

#### インフォメーションパネル (`C`)

- **配置**: Canvasの下に固定表示されます。
- **スクロール**: コンテンツが縦に長くなった場合は、パネル内をスクロールして全ての情報を閲覧できます。
